https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=190810


2006-09-26  Jan Kratochvil  <jan.kratochvil@redhat.com>

	* remote.c (remote_wait): Suggestion on crash due to nonmatching target.
	(remote_async_wait): Likewise.


--- gdb-6.5/gdb/remote.c.orig	2006-10-01 08:01:17.000000000 -0400
+++ gdb-6.5/gdb/remote.c	2006-10-01 08:03:18.000000000 -0400
@@ -2789,8 +2789,13 @@
 					 reg->regnum, regs);
 		  }
 
+		/* It may also occur on amd64 which defaults to 32-bit i386
+		   target.  gdbserver(1) is not aware of the `set architecture'
+		   name itself as it is not using libbfd.  */
 		if (*p++ != ';')
-		  error (_("Remote register badly formatted: %s\nhere: %s"), 
+		  error (_("Remote register badly formatted: %s\nhere: %s"
+			   "\nTry to load the executable by `file' first,"
+			   "\nyou may also check `set/show architecture'."),
 			 buf, p);
 	      }
 	  }
@@ -2983,8 +2988,13 @@
 		    regcache_raw_supply (current_regcache, reg->regnum, regs);
 		  }
 
+		/* It may also occur on amd64 which defaults to 32-bit i386
+		   target.  gdbserver(1) is not aware of the `set architecture'
+		   name itself as it is not using libbfd.  */
 		if (*p++ != ';')
-		  error (_("Remote register badly formatted: %s\nhere: %s"),
+		  error (_("Remote register badly formatted: %s\nhere: %s"
+			   "\nTry to load the executable by `file' first,"
+			   "\nyou may also check `set/show architecture'."),
 			 buf, p);
 	      }
 	  }
