commit 8800e981e44d9fb518feab23219447bf5fe7cc92
Author: Jan Kratochvil <jan.kratochvil@redhat.com>
Date:   Fri Jan 28 14:25:41 2011 +0100

    Fix breakpoints unchaining.
    Possibly: https://bugzilla.redhat.com/show_bug.cgi?id=673483

[ Backported.  ]

--- gdb-7.2/gdb/breakpoint.c.orig	2011-01-28 14:31:54.000000000 +0100
+++ gdb-7.2/gdb/breakpoint.c	2011-01-28 14:33:14.000000000 +0100
@@ -9777,20 +9777,18 @@ delete_breakpoint (struct breakpoint *bp
      breakpoints gets resolved.  */
   if (bpt->related_breakpoint != bpt)
     {
+      struct breakpoint *related;
+
       if (bpt->type == bp_watchpoint_scope)
 	watchpoint_del_at_next_stop (bpt->related_breakpoint);
       else if (bpt->related_breakpoint->type == bp_watchpoint_scope)
 	watchpoint_del_at_next_stop (bpt);
-      else
-	{
-	  struct breakpoint *related;
 
-	  /* Unlink bpt from the bpt->related_breakpoint ring.  */
-	  for (related = bpt; related->related_breakpoint != bpt;
-	       related = related->related_breakpoint);
-	  related->related_breakpoint = bpt->related_breakpoint;
-	  bpt->related_breakpoint = bpt;
-	}
+      /* Unlink bpt from the bpt->related_breakpoint ring.  */
+      for (related = bpt; related->related_breakpoint != bpt;
+	   related = related->related_breakpoint);
+      related->related_breakpoint = bpt->related_breakpoint;
+      bpt->related_breakpoint = bpt;
     }
 
   observer_notify_breakpoint_deleted (bpt->number);
